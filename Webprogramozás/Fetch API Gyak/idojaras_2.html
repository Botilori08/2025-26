<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body onload="betolt()">

    <div id="kiir"></div>

    <script>

    
    let esoOsszeg = 0;
    let sorok =[];

    let datumesEso = [];

    kiirDiv = document.getElementById("kiir");

    let honapNevek = ["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"];
    /*összesen mennyi eső esett
    jelenítsük meg weboldalban

    Havonta mennyi eső esett
    táblázatban megjeleníteni

    Havonta napi átlag
    Táblázatban (ugyanabba)

    A legcsapadékosabb hónap legyen kék hátterű
    a legszárazabbat pirossal*/
        function betolt()
        {
            fetch("idojaras_2.csv")
            .then(x => x.text())
            .then(y => {


                sorok = y.split("\r\n")
                
                sorok.forEach(e => {
                    //console.log(e.split(";")[0]);

                    datumesEso.push({datum: e.split(";")[0],eso: e.split(";")[2]});

                    

                })
                
                console.log(datumesEso)

                datumesEso.forEach(e=> esoOsszeg+= parseInt(e.eso));

                let span = document.createElement("span")
                span.innerHTML = "Az évben leesett teljes csapadék: "+esoOsszeg+" mm"
                document.getElementById("kiir").appendChild(span);

                let honapok = [1,2,3,4,5,6,7,8,9,10,11,12];

                let esok = [];
                let esotemp = 0;
                honapok.forEach(e => 
                {
                    datumesEso.forEach(elem => {
                        if(elem.datum.split(".")[1] == parseInt(e))
                        {
                            esotemp+=parseInt(elem.eso);
                        }
                    })
                    esok.push(esotemp);
                    

                }
                )


                console.log(esok);


                //Másik megoldás

                let esok2 = [];

                datumesEso.forEach(
                    e => {
                        if(esok2[parseInt(e.datum.split(".")[1])] === undefined)
                        {
                            esok2[parseInt(e.datum.split(".")[1])] = 0;
                        }
                        esok2[parseInt(e.datum.split(".")[1])] += parseInt(e.eso);
                    }
                )
                
                let tablazat = document.createElement("table")
                tablazat.id = "tablazat";

                tablazat.innerHTML += "<tr>";


                esok2.forEach((e,index) =>
                    {
                        tablazat.innerHTML += "<tr><td>"+honapNevek[index-1]+"</td><td>"+e+"</td></tr>";
                        console.log(index,e)
                    }
                )

                kiirDiv.appendChild(tablazat);



            })
        }

    </script>
</body>
</html>


